import{R as b,T as C,p as B,r as l,j as e,B as I,L,V as P}from"./index-68f5ae4a.js";import{A}from"./arrow-right-6b53c2fe.js";import{c as F,a as c,u as k,T as E,t as i}from"./object-7a8b68a6.js";import{T,a as z,b as v,F as d,I as p,O as m,B as O,A as R}from"./api.config-2c810a40.js";import{H as D}from"./Helmet-3f6c0755.js";import{F as x,a as N,I as W,l as $}from"./index-05b88b37.js";import{E as H,a as _}from"./EyeOffOutline-54e315cf.js";const q="http://192.168.1.32:8081/support/public/api",U="v1",V="http://192.168.1.32:8080/",M=F().shape({email:c().email().required("Email is required"),password:c().min(5).required("Password is required")}),oe=()=>{const{setLoading:s,loading:h}=b.useContext(C),u=B(),[n,g]=l.useState(!1),o=k({initialValues:{email:"",password:"",plateform:2},validationSchema:M,onSubmit:t=>{j(t)}}),[f,w]=l.useState("");console.log(f+"<<<<<");const j=async t=>{if(s(!0),t.email===""||t.password==="")i.error("Please fill all the fields");else{const S=new URL(`${q}/${U}/${R.login}`);try{const r=await fetch(S.toString(),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)}),a=await r.json();if(r.status===200){const y=a.payload.token;localStorage.setItem("user1Role",a.payload.data.userRole),localStorage.setItem("user1Data",JSON.stringify(a.payload)),s(!1),u("/user/dashboard"),$(`${V}`,{transports:["websocket"],auth:{token:`Bearer ${y}`},reconnection:!0,reconnectionAttempts:3,reconnectionDelay:1e3}).on("connection",()=>{w("Connected to Socket.IO server")})}else i.error(a.message),s(!1)}catch(r){i.error(r.message),s(!1)}}};return e.jsxs(e.Fragment,{children:[e.jsxs(D,{children:[e.jsx("title",{children:"Login - Gogtas"}),e.jsx("meta",{name:"description",content:"Login - Gogtas"})]}),e.jsxs(I,{className:"loginBox",sx:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:[e.jsx(T,{sx:{fontFamily:"Mazzard-regular",fontWeight:"600",fontSize:{md:"45px",xs:"35px",sm:"40px"},textAlign:"center",color:"#182434",lineHeight:"43px"},children:"Login to Your Account"}),e.jsx(z,{sx:{mt:5},style:{boxShadow:"none"},children:e.jsx(v,{sx:{pt:"55px",pl:5,pr:5},children:e.jsxs("form",{onSubmit:o.handleSubmit,noValidate:!0,autoComplete:"off",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e.jsxs(d,{fullWidth:!0,sx:{mb:10},children:[e.jsx(p,{htmlFor:"email",error:!!(o.errors.email&&o.touched.email),sx:{color:"rgba(27, 11, 43, 0.79)",fontweight:"400",fontSize:"15px"},children:"Email*"}),e.jsx(m,{sx:{height:"60px",color:"rgba(27, 11, 43, 0.79)",fontSize:"17px"},autoFocus:!0,label:"Email",id:"email",value:o.values.email,fullWidth:!0,placeholder:"Email",className:"admin-login",onBlur:o.handleBlur,onChange:t=>{t.target.value=t.target.value.trim(),o.handleChange(t)},error:!!(o.errors.email&&o.touched.email)}),o.errors.email&&o.touched.email&&e.jsx(x,{sx:{color:"error.main"},children:o.errors.email})]}),e.jsxs(d,{fullWidth:!0,sx:{mb:0},children:[e.jsx(p,{htmlFor:"password",error:!!(o.errors.password&&o.touched.password),sx:{color:"rgba(27, 11, 43, 0.79)",fontweight:"400",fontSize:"15px"},children:"Password*"}),e.jsx(m,{sx:{height:"60px",color:"rgba(27, 11, 43, 0.79)",fontSize:"17px"},value:o.values.password,label:"Password",onBlur:o.handleBlur,onChange:o.handleChange,fullWidth:!0,id:"password",placeholder:"Password",className:"admin-login",error:!!(o.errors.password&&o.touched.password),type:n?"text":"password",endAdornment:e.jsx(N,{position:"end",children:e.jsx(W,{edge:"end",onMouseDown:t=>t.preventDefault(),onClick:()=>g(!n),children:n?e.jsx(H,{}):e.jsx(_,{})})})}),o.errors.password&&o.touched.password&&e.jsx(x,{sx:{color:"error.main"},id:"",children:o.errors.password})]}),e.jsx("p",{style:{textAlign:"right",width:"100%",marginTop:"8px"},children:e.jsx(L,{to:"/userForgotPassword",style:{textDecoration:"none",color:"#2d4acd",fontSize:"15px",fontWeight:"500",fontFamily:"Mazzard"},children:"Forgot Password?"})}),e.jsx(O,{type:"submit",variant:"contained",sx:{fontWeight:"500",textTransform:"capitalize",fontSize:"15px",width:"100% !important",height:"60px",padding:"15px !important",boxShadow:"0px 3px 15px rgb(45 74 205 / 55%)",my:2},children:h?e.jsx(P,{color:"inherit"}):e.jsxs(e.Fragment,{children:["Log in ",e.jsx("img",{alt:"right-arrow",src:A,style:{marginLeft:"11px"}})]})})]})})})]}),e.jsx(E,{autoClose:3e3,position:"bottom-right"})]})};export{oe as default};
